<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Owner Day-End | ‡§Æ‡§æ‡§≤‡§ï ‡§¶‡§ø‡§µ‡§∏‡§Ö‡§ñ‡•á‡§∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;margin:0;padding:12px}
.hdr{font-size:20px;font-weight:700;text-align:center;margin:8px 0 16px}
.card{background:#fff;border-radius:8px;padding:14px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
.row{display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.k{font-size:13px;color:#555}
.v{font-size:18px;font-weight:700}
.section{margin-top:10px;display:none;border-top:1px solid #eee;padding-top:8px}
.warn{color:#856404;background:#fff3cd;padding:6px;border-radius:4px;font-size:13px}
.err{color:#721c24;background:#f8d7da;padding:6px;border-radius:4px;font-size:13px}
.ok{color:#155724;background:#d4edda;padding:6px;border-radius:4px;font-size:13px}
</style>

<script>
function toggle(id){
  const el = document.getElementById(id);
  el.style.display = el.style.display === "none" ? "block" : "none";
}
</script>
</head>

<body>

<div class="hdr">Owner Day-End / ‡§Æ‡§æ‡§≤‡§ï ‡§¶‡§ø‡§µ‡§∏‡§Ö‡§ñ‡•á‡§∞</div>

<!-- STOCK SUMMARY -->
<div class="card">
  <div class="row" onclick="toggle('stock_detail')">
    <div class="k">üî¢ Stock Summary / ‡§∏‡§æ‡§†‡§æ</div>
    <div class="v">{{ stock_total if stock_total is not none else "-" }}</div>
  </div>
  <div id="stock_detail" class="section">
    {% if not stock_breakup %}
      <div class="warn">Stock breakup not available for this day.</div>
    {% else %}
      {% for k,v in stock_breakup.items() %}
        <div class="row">
          <span class="k">{{ k }}</span>
          <span class="v">{{ v }}</span>
        </div>
      {% endfor %}
    {% endif %}
  </div>
</div>

<!-- CASH SUMMARY -->
<div class="card">
  <div class="row" onclick="toggle('cash_detail')">
    <div class="k">üí∞ Cash Summary / ‡§∞‡•ã‡§ñ</div>
    <div class="v">‚Çπ {{ cash_total if cash_total is not none else 0 }}</div>
  </div>
  <div id="cash_detail" class="section">
    {% if cash_total == 0 %}
      <div class="warn">No cash recorded for this day.</div>
    {% endif %}
    {% if not cash_breakup %}
      <div class="warn">Cash breakup not available.</div>
    {% else %}
      {% for k,v in cash_breakup.items() %}
        <div class="row">
          <span class="k">{{ k }}</span>
          <span class="v">‚Çπ {{ v }}</span>
        </div>
      {% endfor %}
    {% endif %}
  </div>
</div>

<!-- DELIVERY SUMMARY -->
<div class="card">
  <div class="row" onclick="toggle('delivery_detail')">
    <div class="k">üöö Delivery Summary / ‡§°‡§ø‡§≤‡§ø‡§µ‡•ç‡§π‡§∞‡•Ä</div>
    <div class="v">{{ delivery_count if delivery_count is not none else 0 }}</div>
  </div>
  <div id="delivery_detail" class="section">
    {% if delivery_count == 0 %}
      <div class="warn">No deliveries recorded for this day.</div>
    {% endif %}
    {% if not delivery_list %}
      <div class="warn">Delivery details not available.</div>
    {% else %}
      {% for d in delivery_list %}
        <div class="row">
          <span class="k">{{ d.name }}</span>
          <span class="v">{{ d.count }}</span>
        </div>
      {% endfor %}
    {% endif %}
  </div>
</div>

<!-- BPCL STATUS -->
<div class="card">
  <div class="row" onclick="toggle('bpcl_detail')">
    <div class="k">üßæ BPCL Status</div>
    <div class="v">{{ bpcl_status or "PENDING" }}</div>
  </div>
  <div id="bpcl_detail" class="section">
    {% if bpcl_status == "PENDING" %}
      <div class="warn">BPCL day-end not punched yet.</div>
    {% elif bpcl_difference %}
      <div class="err">Difference detected between ERP and BPCL.</div>
    {% else %}
      <div class="ok">BPCL data matches ERP.</div>
    {% endif %}
  </div>
</div>

<p style="font-size:12px;color:#666;text-align:center">
Read-only ‚Ä¢ Same payload ‚Ä¢ Empty/Error states handled
</p>

</body>
</html>
