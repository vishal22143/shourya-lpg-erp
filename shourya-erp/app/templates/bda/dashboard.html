{% extends "base.html" %}
{% block title %}BDA Dashboard{% endblock %}

{% block nav_tabs %}
<div class="tab-bar">
  <a href="/delivery/dashboard">тЖР Delivery</a>
  <a href="/bda/dashboard" class="active">ЁЯПШя╕П BDA</a>
</div>
{% endblock %}

{% block content %}
<div class="page-title">ЁЯПШя╕П BDA Dashboard</div>
<div class="page-sub">{{ today.strftime('%d %B %Y') }}</div>

<div class="card">
  <div class="card-title">тЮХ BDA рд╡реНрдпрд╡рд╣рд╛рд░ / New BDA Transaction</div>
  <form method="post" action="/bda/transaction">
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div class="form-group">
        <label>BDA рдирд┐рд╡рдбрд╛ / Select BDA</label>
        <select name="bda_id" required>
          {% for b in bdas %}
          <option value="{{ b.id }}">{{ b.name }} тАФ {{ b.village }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label>Trip (optional)</label>
        <input type="number" name="trip_id" placeholder="Trip ID if applicable">
      </div>
      <div class="form-group">
        <label>рднрд░рд▓реЗрд▓реЗ рджрд┐рд▓реЗ / Filled Issued</label>
        <input type="number" name="filled_issued" min="0" value="0" inputmode="numeric">
      </div>
      <div class="form-group">
        <label>рд░рд┐рдХрд╛рдореЗ рдШреЗрддрд▓реЗ / Empty Received</label>
        <input type="number" name="empty_received" min="0" value="0" inputmode="numeric">
      </div>
      <div class="form-group">
        <label>Cash Paid тВ╣ / рд░реЛрдЦ</label>
        <input type="number" name="cash_paid" min="0" value="0" step="0.01" inputmode="decimal">
      </div>
      <div class="form-group">
        <label>Online Paid тВ╣ / рдСрдирд▓рд╛рдИрди</label>
        <input type="number" name="online_paid" min="0" value="0" step="0.01" inputmode="decimal">
      </div>
    </div>
    <div class="form-group">
      <label>Notes / рдЯреАрдк</label>
      <input type="text" name="notes" placeholder="Optional">
    </div>
    <button type="submit" class="btn btn-primary btn-block">ЁЯТ╛ Save BDA Transaction</button>
  </form>
</div>

{% if txns %}
<div class="card">
  <div class="card-title">ЁЯУЛ Today's BDA Transactions</div>
  <div class="table-wrap">
    <table>
      <tr><th>BDA</th><th>Filled</th><th>Empty</th><th>Cash тВ╣</th><th>Online тВ╣</th></tr>
      {% for t in txns %}
      <tr>
        <td>{{ t.bda.name }}</td>
        <td style="color:#057a55;">{{ t.filled_issued }}</td>
        <td style="color:#c27803;">{{ t.empty_received }}</td>
        <td>тВ╣{{ t.cash_paid|int }}</td>
        <td>тВ╣{{ t.online_paid|int }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endif %}

{% endblock %}
